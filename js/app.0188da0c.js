(function(e){function t(t){for(var r,n,i=t[0],l=t[1],c=t[2],p=0,d=[];p<i.length;p++)n=i[p],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(r=!1)}r&&(s.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},o={app:0},s=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/demo/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"226e":function(e,t,a){"use strict";a("9777")},"3b84":function(e,t,a){e.exports=a.p+"img/marker.5a8c57f4.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=a("289d"),s=a("afc1"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("AppMap")],1)},i=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"map"},[r("VlMap",{directives:[{name:"show",rawName:"v-show",value:e.mapVisible,expression:"mapVisible"}],ref:"map",attrs:{"data-projection":"EPSG:4326"},on:{click:function(t){e.clickCoordinate=t.coordinate},created:e.onMapCreated,"dl:postrender":e.onMapDefLayerPostRender}},[r("VlView",{ref:"view",attrs:{center:e.center,zoom:e.zoom,rotation:e.rotation},on:{"update:center":function(t){e.center=t},"update:zoom":function(t){e.zoom=t},"update:rotation":function(t){e.rotation=t}}}),r("VlGeoloc",{on:{"update:position":e.onUpdatePosition},scopedSlots:e._u([{key:"default",fn:function(t){return[t.position?r("VlFeature",{attrs:{id:"position-feature"}},[r("VlGeomPoint",{attrs:{coordinates:t.position}}),r("VlStyle",[r("VlStyleIcon",{attrs:{src:a("3b84"),scale:.4,anchor:[.5,1]}})],1)],1):e._e()]}}])}),r("VlFeature",{ref:"marker",attrs:{id:"marker",properties:{start:Date.now(),duration:2500}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("VlGeomPoint",{attrs:{coordinates:[-10,-10]}}),r("VlStyle",[r("VlStyleIcon",{attrs:{src:a("5a25"),scale:.5,anchor:[.1,.95],size:[128,128]}})],1),t.geometry?r("VlOverlay",{attrs:{position:e.pointOnSurface(t.geometry),offset:[10,10]}},[r("p",{staticClass:"is-light box content"},[e._v(" Always opened overlay for Feature ID "),r("strong",[e._v(e._s(t.id))])])]):e._e()]}}])}),r("VlFeature",{attrs:{id:"circle"}},[r("VlGeomCircle",{attrs:{radius:1e6,"radius-projection":"EPSG:3857",coordinates:[0,30]}})],1),e._l(e.baseLayers,(function(t){return r("VlLayerTile",{key:t.name,attrs:{id:t.name,visible:t.visible}},[r("vl-source-"+t.name,e._b({tag:"component"},"component",t,!1))],1)})),e._l(e.layers,(function(t){return r(t.cmp,e._b({key:t.id,tag:"component"},"component",t,!1),[r(t.source.cmp,e._b({tag:"component"},"component",t.source,!1),[t.source.source?r(t.source.source.cmp,e._b({tag:"component"},"component",t.source.source,!1),[t.source.source.staticFeatures&&t.source.source.staticFeatures.length?e._l(t.source.source.staticFeatures,(function(t){return r("VlFeature",{key:t.id,attrs:{id:t.id,properties:t.properties}},[r(e.geometryTypeToCmpName(t.geometry.type),e._b({tag:"component"},"component",t.geometry,!1))],1)})):e._e()],2):e._e()],1),t.style?e._l(t.style,(function(t,a){return r(t.cmp,e._b({key:a,tag:"component"},"component",t,!1),[t.styles?e._l(t.styles,(function(t,a){return r(a,e._b({key:a,tag:"component"},"component",t,!1),[t.fill?r("VlStyleFill",e._b({},"VlStyleFill",t.fill,!1)):e._e(),t.stroke?r("VlStyleStroke",e._b({},"VlStyleStroke",t.stroke,!1)):e._e()],1)})):e._e()],2)})):e._e()],2)})),r("VlLayerVector",{attrs:{id:"draw-pane",visible:"draw"===e.mapPanel.tab}},[r("VlSourceVector",{attrs:{ident:"draw-target",features:e.drawnFeatures},on:{"update:features":function(t){e.drawnFeatures=t}}})],1),r("VlInteractionSelect",{attrs:{active:"draw"!==e.mapPanel.tab,features:e.selectedFeatures},on:{"update:features":function(t){e.selectedFeatures=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[r("VlStyle",[r("VlStyleStroke",{attrs:{color:"#423e9e",width:7}}),r("VlStyleFill",{attrs:{color:[254,178,76,.7]}}),r("VlStyleCircle",{attrs:{radius:5}},[r("VlStyleStroke",{attrs:{color:"#423e9e",width:7}}),r("VlStyleFill",{attrs:{color:[254,178,76,.7]}})],1)],1),r("VlStyle",{attrs:{"z-index":1}},[r("VlStyleStroke",{attrs:{color:"#d43f45",width:2}}),r("VlStyleCircle",{attrs:{radius:5}},[r("VlStyleStroke",{attrs:{color:"#d43f45",width:2}})],1)],1),e._l(t.features,(function(t){return r("VlOverlay",{key:t.id,staticClass:"feature-popup",attrs:{id:t.id,position:e.pointOnSurface(t.geometry),"auto-pan":!0,"auto-pan-animation":{duration:300}},scopedSlots:e._u([{key:"default",fn:function(a){return[r("section",{staticClass:"card"},[r("header",{staticClass:"card-header"},[r("p",{staticClass:"card-header-title"},[e._v(" Feature ID "+e._s(t.id)+" ")]),r("a",{staticClass:"card-header-icon",attrs:{title:"Close"},on:{click:function(a){e.selectedFeatures=e.selectedFeatures.filter((function(e){return e.id!==t.id}))}}},[r("b-icon",{attrs:{icon:"close"}})],1)]),r("div",{staticClass:"card-content"},[r("div",{staticClass:"content"},[r("p",[e._v(" Overlay popup content for Feature with ID "),r("strong",[e._v(e._s(t.id))])]),r("p",[e._v(" Popup: "+e._s(JSON.stringify(a))+" ")]),r("p",[e._v(" Feature: "+e._s(JSON.stringify({id:t.id,properties:t.properties}))+" ")])])])])]}}],null,!0)})}))]}}])}),r("VlInteractionDraw",{attrs:{active:"draw"===e.mapPanel.tab,source:"draw-target",type:e.drawType}}),r("VlInteractionModify",{attrs:{active:"draw"===e.mapPanel.tab,source:"draw-target"}}),r("VlInteractionSnap",{attrs:{active:"draw"===e.mapPanel.tab,source:"draw-target",priority:10}})],2),r("div",{staticClass:"map-panel"},[r("b-collapse",{staticClass:"panel box is-paddingless",attrs:{open:e.panelOpen},on:{"update:open":function(t){e.panelOpen=t}}},[r("div",{staticClass:"panel-heading",attrs:{slot:"trigger"},slot:"trigger"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-11"},[r("strong",[e._v("Map panel")])]),r("div",{staticClass:"column"},[r("b-icon",{attrs:{icon:e.panelOpen?"chevron-up":"chevron-down",size:"is-small"}})],1)])]),r("p",{staticClass:"panel-tabs"},[r("a",{class:e.mapPanelTabClasses("state"),on:{click:function(t){return e.showMapPanelTab("state")}}},[e._v("State")]),r("a",{class:e.mapPanelTabClasses("layers"),on:{click:function(t){return e.showMapPanelTab("layers")}}},[e._v("Layers")]),r("a",{class:e.mapPanelTabClasses("draw"),on:{click:function(t){return e.showMapPanelTab("draw")}}},[e._v("Draw")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"state"===e.mapPanel.tab,expression:"mapPanel.tab === 'state'"}],staticClass:"panel-block"},[r("table",{staticClass:"table is-fullwidth"},[r("tr",[r("th",[e._v("Map center")]),r("td",[e._v(e._s(e.center))])]),r("tr",[r("th",[e._v("Map zoom")]),r("td",[e._v(e._s(e.zoom))])]),r("tr",[r("th",[e._v("Map rotation")]),r("td",[e._v(e._s(e.rotation))])]),r("tr",[r("th",[e._v("Device coordinate")]),r("td",[e._v(e._s(e.deviceCoordinate))])]),r("tr",[r("th",[e._v("Selected features")]),r("td",[e._v(e._s(e.selectedFeatures.map((function(e){return e.id}))))])])])]),e._l(e.layers,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:"layers"===e.mapPanel.tab,expression:"mapPanel.tab === 'layers'"}],key:t.id,staticClass:"panel-block",class:{"is-active":t.visible},on:{click:e.showMapPanelLayer}},[r("b-switch",{key:t.id,model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"layer.visible"}},[e._v(" "+e._s(t.title)+" ")])],1)})),r("div",{directives:[{name:"show",rawName:"v-show",value:"draw"===e.mapPanel.tab,expression:"mapPanel.tab === 'draw'"}],staticClass:"panel-block draw-panel"},[r("div",{staticClass:"buttons"},e._l(e.drawControls,(function(t){return r("button",{key:t.type||-1,staticClass:"button",class:e.drawType&&e.drawType===t.type?"is-info":"",on:{click:function(a){e.drawType=t.type}}},[r("b-icon",{attrs:{icon:t.icon}}),r("span",[e._v(e._s(t.label))])],1)})),0)])],2)],1),r("div",{staticClass:"base-layers-panel"},[r("div",{staticClass:"buttons has-addons"},[e._l(e.baseLayers,(function(t){return r("button",{key:t.name,staticClass:"button is-light",class:{"is-info":t.visible},on:{click:function(a){return e.showBaseLayer(t.name)}}},[e._v(" "+e._s(t.title)+" ")])})),r("button",{staticClass:"button is-light",on:{click:function(t){e.mapVisible=!e.mapVisible}}},[e._v(" "+e._s(e.mapVisible?"Hide map":"Show map")+" ")])],2)])],1)},c=[],u=(a("d81d"),a("a15b"),a("d3b7"),a("25f0"),a("7db0"),a("b0c0"),a("2ef0")),p=a("5b69"),d=a.n(p),m=a("9d47"),f=a("c320"),v=a("1e00"),y=a("256f"),b=a("9a44"),g=a("715e"),h=a("834d"),w=a("3e8c"),_=1024e4,S=968e4,C=[-_/2,-S/2,_/2,S/2],k=new y["b"]({code:"xkcd-image",units:"pixels",extent:C});Object(y["c"])(k);var P=function(e){return 1-Math.pow(1-e,3)},V={name:"Map",data:function(){return{center:[0,0],zoom:2,rotation:0,clickCoordinate:void 0,selectedFeatures:[],deviceCoordinate:void 0,mapPanel:{tab:"state"},panelOpen:!0,mapVisible:!0,drawControls:[{type:"point",label:"Draw Point",icon:"map-marker"},{type:"line-string",label:"Draw LineString",icon:"minus"},{type:"polygon",label:"Draw Polygon",icon:"square-o"},{type:"circle",label:"Draw Circle",icon:"circle-thin"},{type:void 0,label:"Stop drawing",icon:"times"}],drawType:"point",drawnFeatures:[],baseLayers:[{name:"osm",title:"OpenStreetMap",visible:!0},{name:"bingmaps",title:"Bing Maps",apiKey:"ArbsA9NX-AZmebC6VyXAnDqjXk6mo2wGCmeYM8EwyDaxKfQhUYyk0jtx6hX5fpMn",imagerySet:"CanvasGray",visible:!1}],layers:[{id:"pacman",title:"Pacman",cmp:"vl-layer-vector-image",visible:!1,source:{cmp:"vl-source-vector",features:d.a.features},style:[{cmp:"vl-style-func",function:this.pacmanStyleFunc()}]},{id:"circles",title:"Circles",cmp:"vl-layer-vector",visible:!1,source:{cmp:"vl-source-vector",features:Object(u["range"])(0,100).map((function(e){var t=[Object(u["random"])(-50,50),Object(u["random"])(-50,50)];return{type:"Feature",id:"random-cirlce-"+e,geometry:{type:"Circle",coordinates:t,radius:Object(u["random"])(Math.pow(10,5),Math.pow(10,6)),radiusProjection:"EPSG:3857"}}}))}},{id:"countries",title:"Countries",cmp:"vl-layer-vector",visible:!1,source:{cmp:"vl-source-vector",url:"https://openlayers.org/en/latest/examples/data/geojson/countries.geojson"},style:[{cmp:"vl-style",styles:{"vl-style-fill":{color:[255,255,255,.5]},"vl-style-stroke":{color:"#219e46",width:2},"vl-style-text":{text:"",font:"24px FontAwesome",fill:{color:"#2355af"},stroke:{color:"white"}}}}]},{id:"wms",title:"WMS",cmp:"vl-layer-tile",visible:!1,source:{cmp:"vl-source-tile-wms",url:"https://ahocevar.com/geoserver/wms",layers:"topp:states",extParams:{TILED:!0},serverType:"geoserver"}},{id:"wmts",title:"WMTS",cmp:"vl-layer-tile",visible:!1,source:{cmp:"vl-source-wmts",url:"https://services.arcgisonline.com/arcgis/rest/services/Demographics/USA_Population_Density/MapServer/WMTS/",layerName:"0",matrixSet:"EPSG:3857",format:"image/png",styleName:"default"}},{id:"cluster",title:"Cluster",cmp:"vl-layer-vector-image",visible:!1,source:{cmp:"vl-source-cluster",distance:50,source:{cmp:"vl-source-vector",features:Object(u["range"])(0,1e4).map((function(e){var t=[Object(u["random"])(-50,50),Object(u["random"])(-50,50)];return{type:"Feature",id:"random-"+e,geometry:{type:"Point",coordinates:t}}}))}},style:[{cmp:"vl-style-func",function:this.clusterStyleFunc()}]},{id:"wfs",title:"WFS (Canada water areas)",cmp:"vl-layer-vector-image",visible:!1,source:{cmp:"vl-source-vector",features:[],url:function(e,t,a){return"https://ahocevar.com/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature&typename=osm:water_areas&outputFormat=application/json&srsname="+a+"&bbox="+e.join(",")+","+a},loadingStrategy:g["b"]}},{id:"static-image",title:"Static Image with custom projection",cmp:"vl-layer-image",visible:!1,source:{cmp:"vl-source-image-static",projection:k.getCode(),url:"https://imgs.xkcd.com/comics/online_communities.png",imageSize:[1024,968],imageExtent:C}},{id:"wms-image",title:"Image WMS",cmp:"vl-layer-image",visible:!1,source:{cmp:"vl-source-image-wms",url:"https://ahocevar.com/geoserver/wms",layers:"topp:states",serverType:"geoserver"}},{id:"vector-tiles",title:"Vector tiles",cmp:"vl-layer-vector-tile",visible:!1,source:{cmp:"vl-source-vector-tile",url:"https://basemaps.arcgis.com/v1/arcgis/rest/services/World_Basemap/VectorTileServer/tile/{z}/{y}/{x}.pbf"},style:[{cmp:"vl-style",styles:{"vl-style-stroke":{width:2,color:"#2979ff"},"vl-style-circle":{radius:5,stroke:{width:1.5,color:"#2979ff"}}}}]}]}},methods:{camelCase:u["camelCase"],pointOnSurface:w["p"],geometryTypeToCmpName:function(e){return"vl-geom-"+Object(u["kebabCase"])(e)},pacmanStyleFunc:function(){var e=[Object(w["h"])({strokeColor:"#de9147",strokeWidth:3,fillColor:[222,189,36,.8]})],t=[Object(w["h"])({strokeColor:"blue",strokeWidth:1}),Object(w["h"])({imageRadius:5,imageFillColor:"orange",geom:function(e){return new b["a"](e.getGeometry().getCoordinates())}})],a=[Object(w["h"])({imageRadius:6,imageFillColor:"#444444"})];return function(r){switch(r.getId()){case"pacman":return e;case"pacman-path":return t;case"pacman-eye":return a}}},clusterStyleFunc:function(){var e={};return function(t){var a=t.get("features").length,r=e[a];return r||(r=Object(w["h"])({imageRadius:10,imageStrokeColor:"#fff",imageFillColor:"#3399cc",text:a.toString(),textFillColor:"#fff"}),e[a]=r),[r]}},selectFilter:function(e){return-1===["position-feature"].indexOf(e.getId())},onUpdatePosition:function(e){this.deviceCoordinate=e},onMapDefLayerPostRender:function(e){if(this.$refs.marker&&this.$refs.marker.$feature){var t=this.$refs.marker.$feature;if(t.getGeometry()&&t.getStyle()){var a=e.frameState,r=Object(h["a"])(e),o=t.getGeometry().clone(),s=t.get("duration"),n=a.time-t.get("start"),i=n/s,l=35*P(i)+5,c=P(1-i),u=P(.5-i);r.setStyle(Object(w["h"])({imageRadius:l,imageFillColor:[119,170,203,u],imageStrokeColor:[119,170,203,c],imageStrokeWidth:2+c})),r.drawGeometry(o),n>s&&t.set("start",Date.now()),this.$refs.map.render()}}},onMapCreated:function(e){console.log("map vm",e),e.addControls([new m["a"],new f["a"],new v["a"]])},showBaseLayer:function(e){var t=this.baseLayers.find((function(e){return e.visible}));null!=t&&(t.visible=!1),t=this.baseLayers.find((function(t){return t.name===e})),null!=t&&(t.visible=!0)},mapPanelTabClasses:function(e){return{"is-active":this.mapPanel.tab===e}},showMapPanelLayer:function(e){e.visible=!e.visible},showMapPanelTab:function(e){this.mapPanel.tab=e}}},F=V,O=(a("226e"),a("2877")),j=Object(O["a"])(F,l,c,!1,null,"cb34dbe6",null),x=j.exports,M={name:"App",components:{AppMap:x}},T=M,D=(a("034f"),Object(O["a"])(T,n,i,!1,null,null,null)),L=D.exports;r["a"].config.productionTip=!1,r["a"].use(o["a"],{defaultIconPack:"fa"}),r["a"].use(s["a"],{}),new r["a"]({render:function(e){return e(L)}}).$mount("#app")},"5a25":function(e,t,a){e.exports=a.p+"img/flag.b9225040.png"},"5b69":function(e,t){e.exports={type:"FeatureCollection",features:[{type:"Feature",id:"pacman",properties:{},geometry:{coordinates:[[[-119.36662387471965,-41.695909853775774],[-127.94244,-37.751311],[-138.66337,-37.037351],[-147.824999,-37.961188],[-154.42546725056079,-40.34752707396435],[-159.497091,-43.766705],[-164.94328590931863,-49.79123584867231],[-165.97818669927116,-55.507654307259564],[-164.15987129417792,-60.58607221239511],[-156.88931007683288,-64.26307739454326],[-146.38011953841647,-66.57958701677654],[-135.870929,-66.923693],[-124.077324,-66.15905],[-116.42965,-63.550593],[-139.881975,-55.500884],[-129.021801,-48.849505],[-119.36662387471965,-41.695909853775774]]],type:"Polygon"}},{type:"Feature",id:"pacman-path",properties:{},geometry:{coordinates:[[-106.86705950421077,-55.7032908486452],[-63.16248861520228,-55.65897331453094],[-20.008155129472726,-55.078263423967456],[22.281519579649057,-55.570187523502014],[56.710659956242125,-55.61460554958341],[86.26626904665073,-55.34734242173761],[115.30780244306703,-55.4812005671803],[139.7540642173147,-55.347342421737906],[167.03011835128234,-55.302622197467514],[176.9343916103021,-55.257851502422156]],type:"LineString"}},{type:"Feature",id:"pacman-eye",properties:{},geometry:{coordinates:[-147.3604640117643,-49.28908175281041],type:"Point"}}]}},"85ec":function(e,t,a){},9777:function(e,t,a){}});
//# sourceMappingURL=app.0188da0c.js.map